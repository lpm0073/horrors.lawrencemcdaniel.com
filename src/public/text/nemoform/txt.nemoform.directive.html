<div class="finding-nemo-form" ng-controller="NemoformController as ctrl">
  <div ng-if="!ctrl.saved"><h2>Missing Fish Report</h2></div>
  <div><img id="nemo-banner-image" src="images/nemo-banner.jpeg" alt="Nemo banner"></div>

  <fieldset>
<!--    <legend></legend> -->
      <form name="nemoForm" novalidate>

        <div class="finding-nemo-form-column">
          <div class="form-group">
              <label for="firstName">First Name</label>
              <input type="text"
                    class="form-control"
                    id="firstName"
                    name="firstName"
                    placeholder="First Name"
                    ng-model="ctrl.userInfo.firstName"
                    required>
              <span ng-if="nemoForm.firstName.$error.required && nemoForm.firstName.$touched">
                  <small>First name is required</small>
              </span>
          </div>
          <div class="form-group">
              <label for="lastName">Last Name</label>
              <input type="text"
                    class="form-control"
                    id="lastName"
                    name="lastName"
                    placeholder="Last Name"
                    ng-model="ctrl.userInfo.lastName"
                    required>
              <span ng-if="nemoForm.lastName.$error.required && nemoForm.lastName.$touched">
                  <small>Last name is required</small>
              </span>
          </div>
          <div class="form-group">
              <label for="emailAddress">Email</label>
              <input type="email"
                    class="form-control"
                    id="emailAddress"
                    name="emailAddress"
                    placeholder="Email"
                    ng-model="ctrl.userInfo.emailAddress"
                    required>
              <span ng-if="nemoForm.emailAddress.$invalid && nemoForm.emailAddress.$touched">
                  <small>Must be a valid email address: handle@domain format</small>
              </span>
          </div>
        </div>   <!-- finding-nemo-form-column -->

        <div class="finding-nemo-form-column">
          <div class="form-group">
              <label for="phoneNumber">Phone</label>
              <input type="tel"
                    class="form-control"
                    id="phoneNumber"
                    name="phoneNumber"
                    ng-model="ctrl.userInfo.phoneNumber"
                    placeholder="Phone ###-###-####"
                    pattern="(\d{3})-(\d{3})-(\d{4})">
              <span ng-if="nemoForm.phoneNumber.$invalid && nemoForm.phoneNumber.$touched">
                  <small>Phone must be in the format ###-###-####</small>
              </span>
          </div>


          <!-- ---------------------------------------- -->
          <!-- UI Bootstrap Typeahead using http  -->
          <div class="form-group">
              <label for="lastLocation">Last Seen Near</label>
              <input type="text"
              class="form-control"
              id="lastLocation"
              name="lastLocation"
              ng-model="ctrl.userInfo.lastLocation"
              required
              placeholder="Last place you saw Nemo (ex: Saint Thomas, VI)"
              uib-typeahead="address for address in getLocation($viewValue)"
              typeahead-loading="loadingLocations"
              typeahead-no-results="noResults">
              <span ng-if="nemoForm.lastLocation.$invalid && nemoForm.lastLocation.$touched">
                  <small>We must know where you last saw Nemo.</small>
              </span>
              <i ng-show="loadingLocations" class="glyphicon glyphicon-refresh"></i>
              <div ng-show="noResults">
                <i class="glyphicon glyphicon-remove"></i> No Results Found
              </div>
          </div>
          <!-- ---------------------------------------- -->

          <div class="form-group">
              <label for="favoriteDish">Favorite Character</label>
              <input type="text"
                    class="form-control"
                    id="favoriteDish"
                    name="favoriteDish"
                    placeholder="Name of your favorite Nemo character (example: Marlin)"
                    ng-model="ctrl.userInfo.favoriteDish"
                    ng-blur="ctrl.validateFavdish()">
              <span ng-if="ctrl.itemSearched && !ctrl.validShortCode">
                  <small>No such character exists</small>
              </span>
              <span ng-if="ctrl.validShortCode">
                <!-- <div class="panel panel-primary panel-body user-info" ng-if="ctrl.saved"> -->
                <div id="search-results" class="panel panel-default" ng-if="ctrl.saved">
                    <div  class="panel-heading">{{ctrl.userInfo.favoriteDish}}: {{ctrl.userInfo.dishInfo.name}}
                      <div class="panel-body">
                        <dl class="dl-horizontal">
                            <dt>Description:</dt> <dd>{{ctrl.userInfo.dishInfo.description}}</dd>
                            <dt>Price:</dt> <dd>{{ctrl.userInfo.dishInfo.price_large | currency}}</dd>
                        </dl>
                      </div>
                    </div>
                </div>
              </span>
          </div>

        </div> <!-- finding-nemo-form-column -->



          <button class="btn btn-primary"
                  ng-disabled="nemoForm.$invalid"
                  ng-click="ctrl.setNemoinfo()">Submit</button>
      </form>
  </fieldset>

  <div ng-if="ctrl.saved">
      <p class="alert alert-success">
          {{ctrl.message}}
      </p>
  </div>
</div>
